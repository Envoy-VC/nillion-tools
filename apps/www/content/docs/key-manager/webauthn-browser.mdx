---
title: Browser
description: 'Register and Authenticate Credentials'
---

## Start Registration

"Registration" is analogous to new account creation. The user will be prompted to create a new credential. It takes in [PublicKeyCredentialCreationOptionsJSONWithPRF](/api-docs/types/Key_Manager.types.PublicKeyCredentialCreationOptionsJSONWithPRF.html) as props:

import { AutoTypeTable } from 'fumadocs-typescript/ui';

<AutoTypeTable
  path='content/types.ts'
  name='PublicKeyCredentialCreationOptionsJSONWithPRF'
/>

It returns [RegistrationResponseJSONWitPRF](/api-docs/types/Key_Manager.types.RegistrationResponseJSONWitPRF.html)

<AutoTypeTable path='content/types.ts' name='RegistrationResponseJSONWitPRF' />

<Callout type='info'>
  If PRF is not supported for the authenticator this will throw an error.
</Callout>

For detailed information on each of these fields, visit [PublicKeyCredentialCreationOptionsJSONWithPRF](/api-docs/functions/Key_Manager.webauthn_browser.startRegistration.html)

### Usage

```tsx
import { startRegistration } from '@nillion-tools/key-manager/webauthn/browser';
import { generateRegistrationOptions } from '@nillion-tools/key-manager/webauthn/server';

const opts = await generateRegistrationOptions({
  rpName: 'Demo',
  rpID: 'localhost',
  userName: 'testUser',
});

const credential = await startRegistration(opts);
```

---

## Start Authentication

"Authentication" is analogous to logging in. The user will be prompted to authenticate with an existing credential.

It takes in [PublicKeyCredentialRequestOptionsJSONWitPRF](/api-docs/types/Key_Manager.types.PublicKeyCredentialRequestOptionsJSONWitPRF.html) as props:

<AutoTypeTable
  path='content/types.ts'
  name='PublicKeyCredentialRequestOptionsJSONWitPRF'
/>

It returns [AuthenticationResponseJSONWithPRF](/api-docs/types/Key_Manager.types.AuthenticationResponseJSONWithPRF.html)

<AutoTypeTable
  path='content/types.ts'
  name='AuthenticationResponseJSONWithPRF'
/>

### Usage

```tsx
import { startAuthentication } from '@nillion-tools/key-manager/webauthn/browser';
import { generateAuthenticationOptions } from '@nillion-tools/key-manager/webauthn/server';

const opts = await generateAuthenticationOptions({
  rpID: 'localhost',
  allowCredentials: [
    {
      id: 'credential-id',
      transports: ['usb', 'nfc', 'ble'],
    },
  ],
});

const response = await startAuthentication(opts);
```

---

## Encrypt Data

You can encrypt data the randomness generated by the PRF during Authentication process. This function takes in [EncryptDataProps](/api-docs/interfaces/Key_Manager.types.EncryptDataProps.html) as props:

<AutoTypeTable path='content/types.ts' name='EncryptDataProps' />

It returns an Encrypted `ArrayBuffer`

### Usage

```tsx
import { encryptData } from '@nillion-tools/key-manager/webauthn/browser';

const data = new TextEncoder().encode('Hello World');
const nonce = crypto.getRandomValues(new Uint8Array(12));
// Should be the PRF Obtained from the Authentication Process
const keyData = crypto.getRandomValues(new Uint8Array(32));

const { encryptedData } = await encryptData({
  data,
  nonce,
  keyData,
});
```

---

## Decrypt Data

You can decrypt data the randomness generated by the PRF during Authentication process. This function takes in [DecryptDataProps](/api-docs/interfaces/Key_Manager.types.DecryptDataProps.html) as props:

<AutoTypeTable path='content/types.ts' name='DecryptDataProps' />

It returns a `Uint8Array`

### Usage

```tsx
import { decryptData } from '@nillion-tools/key-manager/webauthn/browser';

const encryptedData = new Uint8Array();
// Should be same nonce as the one used during encryption
const nonce = new Uint8Array();
// Should be the PRF Obtained from the Authentication Process
const keyData = new Uint8Array();

const { decrypted } = await decryptData({
  encryptedData,
  nonce,
  keyData,
});
```

## Helper Functions

The Browser module providess various functions to help you with the WebAuthn process, such as checking is WebAuthn is available, or AutoFill service is available, etc.

### Check WebAuthn Support

It returns a `boolean` indicating whether the browser supports WebAuthn.

```tsx
import { browserSupportsWebAuthn } from '@nillion-tools/key-manager/webauthn/browser';

const isSupported = browserSupportsWebAuthn(); // true or false
```

### Check AutoFill Support

It returns a `Promise<boolean>` indicating whether the browser supports WebAuthn AutoFill.

```tsx
import { browserSupportsWebAuthnAutofill } from '@nillion-tools/key-manager/webauthn/browser';

const autofillSupported = await browserSupportsWebAuthnAutofill(); // true or false
```
